<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>REX A350 ‚Äì Check A (REX Fusion)</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.8.4/dist/jspdf.plugin.autotable.min.js"></script>

<style>
:root{
  --bg:#eef2f8;
  --panel:#fff;
  --muted:#f4f6fb;
  --text:#111827;
  --accent:#2563eb;
  --ok:#16a34a;
  --bad:#dc2626;
  --line:#d1d9e6;
  --prev:#1d4ed8;
  --real:#059669;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font:14px/1.45 "Inter",system-ui,Segoe UI,Roboto}
.wrap{display:grid;grid-template-columns:260px 1fr;min-height:100vh}
aside{background:var(--muted);border-right:1px solid var(--line);padding:16px 12px}
main{padding:16px}
h1{margin:0 0 12px;font-size:20px}
h2{margin:0 0 8px;font-size:16px}
.menu h3{font-size:12px;letter-spacing:.08em;color:#334155;margin:0 0 10px;text-transform:uppercase}
.menu button{
  display:block;width:100%;text-align:left;
  background:#f5f8ff;border:1px solid var(--line);color:#0b1220;
  padding:10px 12px;margin:6px 0;border-radius:10px;cursor:pointer
}
.menu button.active{outline:2px solid var(--accent)}
.card{background:var(--panel);border:1px solid var(--line);border-radius:14px;padding:14px;margin-bottom:14px;box-shadow:0 1px 3px rgba(0,0,0,.05)}
.grid{display:grid;gap:12px}
.cols-2{grid-template-columns:1fr 1fr}
.cols-3{grid-template-columns:repeat(3,1fr)}
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
input,select,textarea{
  width:100%;background:#fff;border:1px solid var(--line);color:var(--text);
  border-radius:10px;padding:10px
}
input[type="number"]{text-align:right}
button,.btn{font:inherit}
.btn{border:1px solid var(--line);background:#f5f8ff;color:var(--text);
  border-radius:10px;padding:8px 12px;cursor:pointer}
.btn.ok{background:#e8f7ee;border-color:#b7e3c6;color:#065f46}
.btn.bad{background:#fde8e8;border-color:#fecaca;color:#7f1d1d}
.btn.fuse{background:#eefcef;border-color:#bbf7d0;color:#14532d;font-weight:600}
.btn.primary{background:#e7efff;border-color:#bfdbfe;color:#1e3a8a}
table{width:100%;border-collapse:collapse}
th,td{border-bottom:1px solid var(--line);padding:8px;text-align:right}
th:first-child,td:first-child{text-align:left}
thead th{background:#f7faff;position:sticky;top:0;z-index:1}
.small{font-size:12px;opacity:.9;color:#334155}
.kpi{display:flex;gap:10px;flex-wrap:wrap}
.kpi .pill{padding:8px 10px;border-radius:999px;background:#f5f8ff;border:1px solid var(--line)}
.hidden{display:none}
.topbar{display:flex;gap:8px;justify-content:flex-end;align-items:center;margin-bottom:12px;flex-wrap:wrap}
.topStats{display:flex;gap:8px;align-items:center;margin-left:8px}
.statChip{
  min-width:90px;padding:6px 10px;border-radius:999px;
  background:linear-gradient(135deg,#2563eb,#4ade80);
  color:#f9fafb;display:flex;flex-direction:column;justify-content:center;
}
.statLabel{font-size:10px;text-transform:uppercase;letter-spacing:.08em;opacity:.9}
.statValue{font-size:14px;font-weight:600}
.chart-wrap{height:320px;max-height:50vh}
.chart-wrap canvas{width:100%!important;height:100%!important;display:block}
.filters{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;margin-top:8px}
.filters .btn{grid-column:span 1}
</style>
</head>
<body>
<div class="wrap">
<aside>
  <div class="menu">
    <h3>REX A350</h3>
    <button class="active" data-tab="visit">üõ†Ô∏è Visite</button>
    <button data-tab="problems">üìö Probl√®mes</button>
    <button data-tab="perf">üìä Performance</button>
  </div>
</aside>
<main>
<!-- ====== SECTIONS PRINCIPALES ====== -->

<!-- VISITE -->
<section id="tab-visit">
  <h1>Visite (Check A / 24 Mois)</h1>

  <div class="card">
    <div class="row">
      <h2 style="margin:0">Liste des visites</h2>
      <button id="btnNewVisit" class="btn ok">+ Nouvelle visite</button>
    </div>

    <div class="filters">
      <div><label>Filtre Immat</label><input id="fltImmat" placeholder="Toutes"></div>
      <div>
        <label>Type de check</label>
        <select id="fltCheck">
          <option value="">Tous</option>
          <option>A1</option><option>A2</option><option>A3</option><option>A4</option><option>A5</option><option>A6</option>
          <option>A7</option><option>A8</option><option>A9</option><option>A10</option><option>A11</option><option>A12</option>
          <option>24 Mois</option>
          <option>24 Mois/A1</option><option>24 Mois/A2</option><option>24 Mois/A3</option><option>24 Mois/A4</option>
          <option>24 Mois/A5</option><option>24 Mois/A6</option><option>24 Mois/A7</option><option>24 Mois/A8</option>
          <option>24 Mois/A9</option><option>24 Mois/A10</option><option>24 Mois/A11</option><option>24 Mois/A12</option>
          <option>Check A1</option><option>Check A2</option><option>Check A3</option><option>Check A4</option>
          <option>Check A5</option><option>Check A6</option><option>Check A7</option><option>Check A8</option>
          <option>Check A9</option><option>Check A10</option><option>Check A11</option><option>Check A12</option>
        </select>
      </div>
      <div><label>PF</label><select id="fltPF"><option value="">Tous</option><option value="1">Oui</option><option value="0">Non</option></select></div>
      <div><label>BORO</label><select id="fltBORO"><option value="">Tous</option><option value="1">Oui</option><option value="0">Non</option></select></div>
      <div><label>VAC ‚â•</label><input id="fltVacMin" type="number" min="0" value="0"></div>
      <div><label>TRFX</label><input id="fltTrfx" placeholder="Contient‚Ä¶"></div>
      <div style="display:flex;align-items:flex-end"><button id="btnApplyVisitFilters" class="btn">Filtrer</button></div>
    </div>

    <div style="overflow:auto;margin-top:8px">
      <table id="visitsTable">
        <thead>
          <tr><th>#</th><th>Immat</th><th>Check</th><th>Arriv√©e</th><th>APRS sign√©</th>
          <th>HMO plan</th><th>HMO r√©el</th><th>Œî</th><th>P/F</th><th>BORO</th><th>Actions</th></tr>
        </thead>
        <tbody id="visitsBody"></tbody>
      </table>
    </div>
  </div>

  <div class="card">
    <h2>Formulaire visite</h2>
    <div class="grid cols-3">
      <div><label>Immatriculation</label><input id="vImmat" placeholder="F-HUVK"></div>
      <div>
        <label>Type de check</label>
        <select id="vCheck">
          <option>A1</option><option>A2</option><option>A3</option><option>A4</option><option>A5</option><option>A6</option>
          <option>A7</option><option>A8</option><option>A9</option><option>A10</option><option>A11</option><option>A12</option>
          <option>24 Mois</option>
          <option>24 Mois/A1</option><option>24 Mois/A2</option><option>24 Mois/A3</option><option>24 Mois/A4</option>
          <option>24 Mois/A5</option><option>24 Mois/A6</option><option>24 Mois/A7</option><option>24 Mois/A8</option>
          <option>24 Mois/A9</option><option>24 Mois/A10</option><option>24 Mois/A11</option><option>24 Mois/A12</option>
          <option>Check A1</option><option>Check A2</option><option>Check A3</option><option>Check A4</option>
          <option>Check A5</option><option>Check A6</option><option>Check A7</option><option>Check A8</option>
          <option>Check A9</option><option>Check A10</option><option>Check A11</option><option>Check A12</option>
        </select>
      </div>
      <div><label>TRFX</label><input id="vTrfxVisit" placeholder="TRFX-XXXX"></div>
    </div>
    <div class="grid cols-2" style="margin-top:8px">
      <div><label>Arriv√©e pr√©vue</label><input id="vArrPrev" type="datetime-local"></div>
      <div><label>Arriv√©e r√©elle</label><input id="vArrReal" type="datetime-local"></div>
      <div><label>APRS pr√©vu</label><input id="vDepPrev" type="datetime-local"></div>
      <div><label>APRS r√©el</label><input id="vDepReal" type="datetime-local"></div>
    </div>
    <div class="grid cols-2" style="margin-top:8px">
      <div><label>HMO pr√©vu (h)</label><input id="vHmoPlan" type="number" min="0" step="0.1"></div>
      <div><label>HMO r√©el (h)</label><input id="vHmoReal" type="number" min="0" step="0.1"></div>
    </div>
    <div class="row" style="margin-top:8px">
      <label><input id="vPF" type="checkbox"> Pr√©sence PF</label>
      <label><input id="vBORO" type="checkbox"> Pr√©sence BORO</label>
    </div>
    <div class="row" style="margin-top:10px">
      <button id="btnSaveVisit" class="btn ok">üíæ Enregistrer</button>
      <button id="btnExportPdf" class="btn primary">üìÑ PDF Visite</button>
      <button id="btnClearVisit" class="btn bad">üßπ Effacer</button>
    </div>
  </div>
</section>

<!-- PROBLEMES -->
<section id="tab-problems" class="hidden">
  <h1>Probl√®mes REX</h1>
  <div class="card">
    <div class="grid cols-3">
      <div><label>Titre</label><input id="pTitle"></div>
      <div><label>Cat√©gorie</label><select id="pCat"><option>Cabine</option><option>Sous-traitance</option><option>Query</option><option>Pi√®ces/Log</option><option>Effectifs</option><option>Documentation</option></select></div>
      <div><label>Impact (h)</label><input id="pImpact" type="number" step="0.5"></div>
    </div>
    <div><label>Description</label><textarea id="pDesc" rows="3"></textarea></div>
    <button id="btnAddProblem" class="btn ok">+ Ajouter probl√®me</button>
  </div>
  <div class="card">
    <h2>Liste probl√®mes</h2>
    <table>
      <thead><tr><th>#</th><th>Titre</th><th>Cat√©gorie</th><th>Impact(h)</th><th></th></tr></thead>
      <tbody id="problemsBody"></tbody>
    </table>
  </div>
</section>

<!-- PERFORMANCE -->
<section id="tab-perf" class="hidden">
  <h1>Performance visites</h1>
  <div class="card">
    <div class="grid cols-3">
      <div><label>D√©but</label><input id="pfStart" type="date"></div>
      <div><label>Fin</label><input id="pfEnd" type="date"></div>
      <div><label>Type Check</label>
        <select id="pfCheck">
          <option value="">Tous</option>
          <option>A1</option><option>A2</option><option>A3</option><option>A4</option><option>A5</option><option>A6</option>
          <option>A7</option><option>A8</option><option>A9</option><option>A10</option><option>A11</option><option>A12</option>
          <option>24 Mois</option>
          <option>24 Mois/A1</option><option>24 Mois/A2</option><option>24 Mois/A3</option><option>24 Mois/A4</option>
          <option>24 Mois/A5</option><option>24 Mois/A6</option><option>24 Mois/A7</option><option>24 Mois/A8</option>
          <option>24 Mois/A9</option><option>24 Mois/A10</option><option>24 Mois/A11</option><option>24 Mois/A12</option>
          <option>Check A1</option><option>Check A2</option><option>Check A3</option><option>Check A4</option>
          <option>Check A5</option><option>Check A6</option><option>Check A7</option><option>Check A8</option>
          <option>Check A9</option><option>Check A10</option><option>Check A11</option><option>Check A12</option>
        </select>
      </div>
    </div>
    <div class="row" style="margin-top:8px">
      <button id="btnPerfRefresh" class="btn">Actualiser</button>
      <button id="btnPerfPdf" class="btn primary">üìÑ PDF Performance</button>
    </div>
  </div>

  <div class="grid cols-2">
    <div class="card">
      <h2>R√©partition des cat√©gories (Pareto)</h2>
      <div class="chart-wrap"><canvas id="pie"></canvas></div>
    </div>
    <div class="card">
      <h2>HMO planifi√© vs r√©el (visites filtr√©es)</h2>
      <div class="chart-wrap"><canvas id="barHmo"></canvas></div>
    </div>
  </div>

  <div class="grid cols-2">
    <div class="card">
      <h2>R√©partition PF / BORO</h2>
      <div class="chart-wrap"><canvas id="barPfBoro"></canvas></div>
    </div>
    <div class="card">
      <h2>Tendance Œî HMO</h2>
      <div class="chart-wrap"><canvas id="lineDelta"></canvas></div>
    </div>
  </div>
</section>
<script>
/* ======== DONN√âES & STOCKAGE ======== */
let visits = JSON.parse(localStorage.getItem("visits") || "[]");
let problems = JSON.parse(localStorage.getItem("problems") || "[]");
let currentVisitIndex = null;

/* ======== NAVIGATION ======== */
document.querySelectorAll("aside button").forEach(b=>{
  b.onclick = ()=>{
    document.querySelectorAll("aside button").forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
    document.querySelectorAll("main section").forEach(s=>s.classList.add("hidden"));
    document.querySelector("#tab-"+b.dataset.tab).classList.remove("hidden");
    if(b.dataset.tab=="perf") refreshPerf();
  };
});

/* ======== UTILITAIRES ======== */
function saveAll(){
  localStorage.setItem("visits", JSON.stringify(visits));
  localStorage.setItem("problems", JSON.stringify(problems));
}
function fmt(num){return num!=null && !isNaN(num)?Number(num).toFixed(1):"";}

/* ======== VISITES ======== */
function refreshVisits(){
  const tb=document.getElementById("visitsBody");
  tb.innerHTML="";
  const fltImmat=document.getElementById("fltImmat").value.toUpperCase();
  const fltCheck=document.getElementById("fltCheck").value;
  const fltPF=document.getElementById("fltPF").value;
  const fltBORO=document.getElementById("fltBORO").value;
  const fltVacMin=Number(document.getElementById("fltVacMin").value);
  const fltTrfx=document.getElementById("fltTrfx").value.toUpperCase();

  visits.forEach((v,i)=>{
    if(fltImmat && !v.immat.toUpperCase().includes(fltImmat)) return;
    if(fltCheck && v.check!=fltCheck) return;
    if(fltPF!=="" && Number(v.pf)!=Number(fltPF)) return;
    if(fltBORO!=="" && Number(v.boro)!=Number(fltBORO)) return;
    if(fltVacMin>0 && (v.vacations?.length||0)<fltVacMin) return;
    if(fltTrfx && !v.trfx?.toUpperCase().includes(fltTrfx)) return;

    const tr=document.createElement("tr");
    const delta=v.hmoReal-v.hmoPlan;
    tr.innerHTML=`
      <td>${i+1}</td>
      <td>${v.immat}</td>
      <td>${v.check}</td>
      <td>${v.arrPrev?.split("T")[0]||""}</td>
      <td>${v.depReal?.split("T")[0]||""}</td>
      <td>${fmt(v.hmoPlan)}</td>
      <td>${fmt(v.hmoReal)}</td>
      <td style="color:${delta>0?'var(--bad)':'var(--ok)'}">${fmt(delta)}</td>
      <td>${v.pf?"‚úÖ":""}</td>
      <td>${v.boro?"‚úÖ":""}</td>
      <td>
        <button class="btn" onclick="editVisit(${i})">‚úèÔ∏è</button>
        <button class="btn bad" onclick="deleteVisit(${i})">üóëÔ∏è</button>
      </td>`;
    tb.appendChild(tr);
  });
}
refreshVisits();
document.getElementById("btnApplyVisitFilters").onclick=refreshVisits;

document.getElementById("btnNewVisit").onclick=()=>{
  currentVisitIndex=null;
  document.querySelectorAll("#tab-visit input, #tab-visit select").forEach(e=>{
    if(e.type=="checkbox") e.checked=false; else e.value="";
  });
};
document.getElementById("btnSaveVisit").onclick=()=>{
  const v={
    immat:document.getElementById("vImmat").value||"N/A",
    check:document.getElementById("vCheck").value,
    trfx:document.getElementById("vTrfxVisit").value,
    arrPrev:document.getElementById("vArrPrev").value,
    arrReal:document.getElementById("vArrReal").value,
    depPrev:document.getElementById("vDepPrev").value,
    depReal:document.getElementById("vDepReal").value,
    hmoPlan:+document.getElementById("vHmoPlan").value||0,
    hmoReal:+document.getElementById("vHmoReal").value||0,
    pf:document.getElementById("vPF").checked,
    boro:document.getElementById("vBORO").checked
  };
  if(!v.trfx){alert("TRFX obligatoire pour la visite !");return;}
  if(currentVisitIndex==null) visits.push(v); else visits[currentVisitIndex]=v;
  saveAll(); refreshVisits(); alert("Visite enregistr√©e !");
};
function editVisit(i){
  currentVisitIndex=i; const v=visits[i];
  document.getElementById("vImmat").value=v.immat;
  document.getElementById("vCheck").value=v.check;
  document.getElementById("vTrfxVisit").value=v.trfx||"";
  document.getElementById("vArrPrev").value=v.arrPrev||"";
  document.getElementById("vArrReal").value=v.arrReal||"";
  document.getElementById("vDepPrev").value=v.depPrev||"";
  document.getElementById("vDepReal").value=v.depReal||"";
  document.getElementById("vHmoPlan").value=v.hmoPlan||"";
  document.getElementById("vHmoReal").value=v.hmoReal||"";
  document.getElementById("vPF").checked=v.pf||false;
  document.getElementById("vBORO").checked=v.boro||false;
}
function deleteVisit(i){
  if(confirm("Supprimer cette visite ?")){visits.splice(i,1);saveAll();refreshVisits();}
}

/* ======== PROBLEMES ======== */
function refreshProblems(){
  const tb=document.getElementById("problemsBody");tb.innerHTML="";
  problems.forEach((p,i)=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`<td>${i+1}</td><td>${p.titre}</td><td>${p.cat}</td><td>${fmt(p.impact)}</td>
      <td><button class='btn bad' onclick='delProb(${i})'>üóëÔ∏è</button></td>`;
    tb.appendChild(tr);
  });
}
document.getElementById("btnAddProblem").onclick=()=>{
  const titre=document.getElementById("pTitle").value.trim();
  if(!titre)return alert("Titre requis");
  problems.push({
    titre,cat:document.getElementById("pCat").value,
    impact:+document.getElementById("pImpact").value||0,
    desc:document.getElementById("pDesc").value
  });
  saveAll();refreshProblems();alert("Probl√®me ajout√© !");
};
function delProb(i){if(confirm("Supprimer ce probl√®me ?")){problems.splice(i,1);saveAll();refreshProblems();}}
refreshProblems();

/* ======== PERFORMANCE ======== */
function refreshPerf(){
  const start=document.getElementById("pfStart").value;
  const end=document.getElementById("pfEnd").value;
  const check=document.getElementById("pfCheck").value;
  const flt=visits.filter(v=>{
    if(start && v.arrPrev<start) return false;
    if(end && v.arrPrev>end) return false;
    if(check && v.check!=check) return false;
    return true;
  });
  const delta=flt.map(v=>v.hmoReal-v.hmoPlan);
  const avgDelta=delta.length?(delta.reduce((a,b)=>a+b,0)/delta.length):0;
  const pfYes=flt.filter(v=>v.pf).length, pfNo=flt.length-pfYes;
  const boYes=flt.filter(v=>v.boro).length, boNo=flt.length-boYes;

  const cats={}; problems.forEach(p=>cats[p.cat]=(cats[p.cat]||0)+1);
  const ctx1=document.getElementById("pie"), ctx2=document.getElementById("barHmo"),
        ctx3=document.getElementById("barPfBoro"), ctx4=document.getElementById("lineDelta");
  if(window.charts){for(let c of Object.values(window.charts)) c.destroy();}
  window.charts={
    pie:new Chart(ctx1,{type:"pie",data:{labels:Object.keys(cats),datasets:[{data:Object.values(cats),backgroundColor:["#60a5fa","#34d399","#fcd34d","#f87171","#a78bfa","#fbbf24"]}]}}),
    barHmo:new Chart(ctx2,{type:"bar",data:{labels:flt.map(v=>v.immat),
      datasets:[{label:"Planifi√©",data:flt.map(v=>v.hmoPlan),backgroundColor:"var(--prev)"},{label:"R√©el",data:flt.map(v=>v.hmoReal),backgroundColor:"var(--real)"}]}}),
    barPfBoro:new Chart(ctx3,{type:"bar",data:{labels:["PF Oui","PF Non","BORO Oui","BORO Non"],
      datasets:[{data:[pfYes,pfNo,boYes,boNo],backgroundColor:["#16a34a","#dc2626","#3b82f6","#9ca3af"]}]}}),
    lineDelta:new Chart(ctx4,{type:"line",data:{labels:flt.map(v=>v.immat),
      datasets:[{label:"Œî HMO",data:delta,borderColor:"#2563eb",tension:.3,fill:false}]}})
  };
}

/* ======== EXPORT PDF ======== */
document.getElementById("btnPerfPdf").onclick=()=>exportPdf("global");
document.getElementById("btnExportPdf").onclick=()=>exportPdf("visit");

function exportPdf(mode){
  const {jsPDF}=window.jspdf; const doc=new jsPDF({orientation:"landscape"});
  const dark="#0f172a";
  doc.setFillColor(22,27,34); doc.rect(0,0,300,15,"F");
  doc.setTextColor(255); doc.setFontSize(14);
  doc.text(mode=="visit"?"REX VISITE":"REX PERFORMANCE",10,10);
  doc.setTextColor(0); doc.setFontSize(10);
  doc.text("G√©n√©r√© le "+new Date().toLocaleString("fr-FR"),10,20);

  if(mode=="visit"){
    const v=currentVisitIndex!=null?visits[currentVisitIndex]:visits.at(-1);
    doc.autoTable({startY:25,head:[["Immat","Check","TRFX","HMO plan","HMO r√©el","Œî","PF","BORO"]],
      body:[[v.immat,v.check,v.trfx,fmt(v.hmoPlan),fmt(v.hmoReal),fmt(v.hmoReal-v.hmoPlan),v.pf?"Oui":"Non",v.boro?"Oui":"Non"]]});
  }else{
    const cats={}; problems.forEach(p=>cats[p.cat]=(cats[p.cat]||0)+1);
    doc.autoTable({startY:25,head:[["Cat√©gorie","Occurrences"]],body:Object.entries(cats)});
    const avgDelta=visits.length?(visits.map(v=>v.hmoReal-v.hmoPlan).reduce((a,b)=>a+b,0)/visits.length):0;
    doc.text("Moyenne Œî HMO : "+fmt(avgDelta)+" h",10,doc.lastAutoTable.finalY+10);
  }
  doc.save(mode=="visit"?"REX_Visite.pdf":"REX_PERF.pdf");
}
</script>
<!-- ======== STYLE G√âN√âRAL ======== -->
<style>
:root {
  --bg: #f1f5f9;
  --card: #ffffff;
  --text: #0f172a;
  --ok: #16a34a;
  --bad: #dc2626;
  --prev: #60a5fa;
  --real: #34d399;
}
body {
  margin: 0; font-family: 'Segoe UI', sans-serif;
  background: var(--bg); color: var(--text);
  display: flex; min-height: 100vh;
}
aside {
  width: 200px; background: #1e293b; color: white;
  display: flex; flex-direction: column; padding: 10px;
}
aside button {
  background: transparent; border: none; color: white;
  text-align: left; padding: 10px; cursor: pointer;
  border-radius: 8px; margin: 3px 0;
}
aside button.active, aside button:hover {background:#334155;}
main {flex:1; padding:15px; overflow:auto;}
.hidden {display:none;}
h1 {font-size:1.5rem; margin:10px 0; color:#1e40af;}
h2 {font-size:1.1rem; color:#1e3a8a; margin-top:5px;}
.card {
  background: var(--card); border-radius:10px;
  box-shadow:0 2px 6px rgba(0,0,0,.08);
  padding:12px; margin-bottom:12px;
}
.grid {display:grid; gap:10px;}
.grid.cols-2 {grid-template-columns:1fr 1fr;}
.grid.cols-3 {grid-template-columns:repeat(3,1fr);}
.row {display:flex; gap:10px; align-items:center; flex-wrap:wrap;}
.btn {
  border:none; padding:6px 12px; border-radius:6px;
  cursor:pointer; background:#475569; color:white;
}
.btn:hover {opacity:.9;}
.btn.ok {background:var(--ok);}
.btn.bad {background:var(--bad);}
.btn.primary {background:#2563eb;}
table {width:100%; border-collapse:collapse; font-size:.9rem;}
table th, table td {border-bottom:1px solid #e2e8f0; padding:6px 4px; text-align:left;}
table th {background:#e2e8f0;}
input, select, textarea {
  width:100%; padding:5px; border:1px solid #cbd5e1;
  border-radius:5px; font-size:.9rem;
}
.chart-wrap {height:280px;}
canvas {width:100%!important;height:100%!important;}
</style>

<!-- ======== FIN DU HTML ======== -->
</main>
</body>
</html>
